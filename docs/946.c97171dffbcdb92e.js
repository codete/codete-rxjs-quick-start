"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[946],{19946:(ft,v,o)=>{o.r(v),o.d(v,{SearchResultsPostsInteractionsComponent:()=>M,SearchResultsPostsInteractionsModule:()=>ut});var P=o(666),y=o(55400),A=o(57267),u=o(97808),x=o(35921),t=o(38687),g=o(42363),h=o(29606),I=o(96790),L=o(82937),d=o(52779),N=o(88143),$=o(62335),R=o(28477),J=o(36506),B=o(52061),U=o(61831),E=o(75921),Q=o(6900),l=o(15718),C=o(38689),f=o(17314);let S=(()=>{class e{constructor(n){this.http=n,this.getHamsterByName=s=>s?l.I6.ctrl.getHamsterByName(s).received.observable.pipe((0,d.U)(r=>r.body.rawJson)):(0,C.of)([])}getHamsterByName(n){return n?this.http.get(`${l.ho}/api/hamsterByName/${n}`):(0,C.of)([])}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var c=o(18205),W=o(11102),T=o(48095),Y=o(3326),p=o(8193);const _=["side"],b=["search"];function w(e,a){1&e&&t._uU(0," zero hamsters to show\n")}function z(e,a){1&e&&(t.TgZ(0,"span"),t._uU(1," loading data from server"),t.qZA())}function G(e,a){if(1&e&&t._UZ(0,"span",8),2&e){t.oxw(2);const n=t.MAs(3);t.Q6J("ngTemplateOutlet",n)}}function j(e,a){if(1&e&&(t.ynx(0),t.YNc(1,z,2,0,"span",13),t.YNc(2,G,1,1,"span",14),t.BQk()),2&e){const n=a.$implicit;t.xp6(1),t.Q6J("ngIf",n.length>0),t.xp6(1),t.Q6J("ngIf",0===n.length)}}function X(e,a){1&e&&(t.TgZ(0,"span"),t._uU(1,"please type hamster name in the input above"),t.qZA())}function D(e,a){if(1&e&&(t.YNc(0,j,3,2,"ng-container",11),t.ALo(1,"async"),t.YNc(2,X,2,0,"ng-template",null,12,t.W1O)),2&e){const n=t.MAs(3),s=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,s.typedWords$))("ngIfElse",n)}}function K(e,a){if(1&e&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",n," ")}}function V(e,a){if(1&e&&(t.TgZ(0,"div",15)(1,"h4",16),t._uU(2,"Already typed words:"),t.qZA(),t.TgZ(3,"ul",null,17),t.YNc(5,K,2,1,"li",18),t.ALo(6,"async"),t.qZA()()),2&e){const n=t.oxw();t.xp6(5),t.Q6J("ngForOf",t.lcZ(6,1,n.typedWords$))}}function k(e,a){1&e&&t._UZ(0,"app-hamster",22),2&e&&t.Q6J("hamster",a.$implicit)}function q(e,a){if(1&e&&(t.ynx(0),t.YNc(1,k,1,1,"app-hamster",21),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",n)}}function tt(e,a){if(1&e&&(t.TgZ(0,"div",20),t.YNc(1,q,2,1,"ng-container",11),t.qZA()),2&e){const n=a.$implicit;t.oxw(2);const s=t.MAs(1);t.xp6(1),t.Q6J("ngIf",n.length>0)("ngIfElse",s)}}function et(e,a){if(1&e&&(t.YNc(0,tt,2,2,"div",19),t.ALo(1,"async")),2&e){const n=t.oxw(),s=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,n.searchResults$))("ngIfElse",s)}}let nt=(()=>{class e{constructor(n){this.api=n,this.searchInputChange$=(0,I.P)(()=>(0,L.R)(this.search?.nativeElement,"keyup")).pipe((0,d.U)(s=>s.target.value),(0,N.b)(500),(0,$.x)(),(0,R.B)()),this.isLoadingData=!1}ngOnInit(){this.typedWords$=this.searchInputChange$.pipe((0,J.h)(n=>!!n),(0,B.R)((n,s)=>n.concat(s).slice(-20),[]),(0,u.b)(()=>this.scrollBottom(this.side))),this.searchResults$=this.searchInputChange$.pipe((0,u.b)(()=>this.isLoadingData=!0),(0,U.w)(n=>this.api.getHamsterByName(n).pipe((0,E.K)(s=>(this.isLoadingData=!1,Q.E)))),(0,u.b)(()=>this.isLoadingData=!1))}scrollBottom(n){n&&setTimeout(()=>{n.nativeElement.scrollTop=n.nativeElement.scrollHeight})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(S))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-hamster-search"]],viewQuery:function(n,s){if(1&n&&(t.Gf(_,5,t.SBq),t.Gf(b,7)),2&n){let r;t.iGM(r=t.CRH())&&(s.side=r.first),t.iGM(r=t.CRH())&&(s.search=r.first)}},features:[t._Bn([S])],decls:21,vars:3,consts:[["zeroHamsterTemplate",""],["loadingDataTemplate",""],["appearance","fill",1,"example-full-width"],["matInput",""],["search",""],["typed",""],["hamsters",""],["grow",""],[3,"ngTemplateOutlet"],["width","200","hideMobile",""],["showMobile","","grow",""],[4,"ngIf","ngIfElse"],["elseTemplate",""],[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"side"],[1,"title"],["side",""],[4,"ngFor","ngForOf"],["class","hamsters",4,"ngIf","ngIfElse"],[1,"hamsters"],[3,"hamster",4,"ngFor","ngForOf"],[3,"hamster"]],template:function(n,s){if(1&n&&(t.YNc(0,w,1,0,"ng-template",null,0,t.W1O),t.YNc(2,D,4,4,"ng-template",null,1,t.W1O),t.TgZ(4,"mat-form-field",2)(5,"mat-label"),t._uU(6,"Type name of your little, chubby friend"),t.qZA(),t._UZ(7,"input",3,4),t.qZA(),t.YNc(9,V,7,3,"ng-template",null,5,t.W1O),t.YNc(11,et,2,4,"ng-template",null,6,t.W1O),t.TgZ(13,"columns-container")(14,"column",7),t.GkF(15,8),t.qZA(),t.TgZ(16,"column",9),t.GkF(17,8),t.qZA()(),t.TgZ(18,"columns-container")(19,"column",10),t.GkF(20,8),t.qZA()()),2&n){const r=t.MAs(10),i=t.MAs(12);t.xp6(15),t.Q6J("ngTemplateOutlet",i),t.xp6(2),t.Q6J("ngTemplateOutlet",r),t.xp6(3),t.Q6J("ngTemplateOutlet",r)}},dependencies:[c.sg,c.O5,c.tP,W.Nt,T.KE,T.hX,Y.L,p.a_,p.bg,p.iB,p.UO,p.uf,c.Ov],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{display:inline-block;vertical-align:text-top}.side[_ngcontent-%COMP%]{background-color:#d3d3d3}.side[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-indent:20px;padding-top:10px}.side[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%;min-height:70px;max-height:150px;overflow-y:auto;overflow-x:hidden}.hamsters[_ngcontent-%COMP%]{margin:10px;display:flex;justify-content:space-evenly;flex-wrap:wrap;align-items:center}.hamsters[_ngcontent-%COMP%]   app-hamster[_ngcontent-%COMP%]{margin-bottom:10px;display:flex}span[_ngcontent-%COMP%]{display:block;padding:10px}"]}),e})();var H=o(67411),st=o(28999),O=o(10612);function Z(e,a){return a?n=>n.pipe(Z((s,r)=>(0,H.Xf)(e(s,r)).pipe((0,d.U)((i,m)=>a(s,i,r,m))))):(0,st.e)((n,s)=>{let r=0,i=null,m=!1;n.subscribe((0,O.x)(s,gt=>{i||(i=(0,O.x)(s,void 0,()=>{i=null,m&&s.complete()}),(0,H.Xf)(e(gt,r++)).subscribe(i))},()=>{m=!0,!i&&s.complete()}))})}var at=o(61017),ot=o(25908);let F=(()=>{class e{constructor(n,s){this.http=n,this.snackBar=s,this.getHamsterOwners=()=>l.I6.ctrl.getHamsters().received.observable.pipe((0,d.U)(r=>r.body.rawJson))}getHamsterOwners(){return this.http.get(`${l.ho}/api/hamsters`)}applyLoveTo(n){return new at.y(s=>{n.isLoading=!0,setTimeout(()=>{isNaN(n.loveLevel)&&(n.loveLevel=0),n.loveLevel<=100&&(n.loveLevel=Number(n.loveLevel)+5),n.isLoading=!1,s.complete(),this.snackBar.open("DONE",void 0,{duration:1e3})},3e3)})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(f.eN),t.LFG(ot.ux))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var rt=o(37818);function it(e,a){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-hamster-post",2),t.NdJ("loveButton",function(){const i=t.CHM(n).$implicit,m=t.oxw();return t.KtG(m.loveClicking$.next(i))}),t.qZA(),t.BQk()}if(2&e){const n=a.$implicit;t.xp6(1),t.Q6J("hamster",n)}}let lt=(()=>{class e{constructor(n){this.api=n,this.loveClicking$=new y.x,this.saveLoveClick$=this.loveClicking$.pipe(Z(s=>this.api.applyLoveTo(s))).subscribe(),this.hamsters$=this.api.getHamsterOwners().pipe((0,d.U)(s=>s.map(r=>r)))}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(F))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-feed-hamster-with-love"]],features:[t._Bn([F])],decls:5,vars:3,consts:[[1,"hamsters"],[4,"ngFor","ngForOf"],[3,"hamster","loveButton"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t.YNc(1,it,2,1,"ng-container",1),t.ALo(2,"async"),t.qZA(),t._UZ(3,"br")(4,"br")),2&n&&(t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,s.hamsters$)))},dependencies:[c.sg,rt.F,c.Ov],styles:[".hamsters[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;width:100%;flex-wrap:wrap}.hamsters[_ngcontent-%COMP%]   app-hamster-post[_ngcontent-%COMP%]{display:flex}"]}),e})();function ct(e,a){1&e&&t._UZ(0,"app-hamster-search")}function pt(e,a){1&e&&t._UZ(0,"app-feed-hamster-with-love")}let M=(()=>{class e{constructor(n,s){this.route=n,this.router=s,this.destroy$=new y.x,this.expanded={},this.SEARCH="hamsters-search",this.POSTS="hamster-posts",this.currentUrl$=this.route.url}ngOnInit(){this.route.queryParams.pipe((0,A.R)(this.destroy$),(0,u.b)(n=>{0===Object.keys(n).length?this.expanded[this.SEARCH]=!0:this.expanded[n.tab]=!0})).subscribe()}setTab(n){var s=this;return(0,P.Z)(function*(){const r=yield(0,x.z)(s.route.queryParams);if(n===s.SEARCH&&(Object.keys(r).includes(s.SEARCH)||0===Object.keys(r).length))return;const i=yield(0,x.z)(s.currentUrl$);s.router.navigate(i,{queryParams:{tab:n}})})()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.gz),t.Y36(g.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-search-results-posts-interactions-tab"]],decls:11,vars:2,consts:[[3,"expanded","opened"],["matExpansionPanelContent",""]],template:function(n,s){1&n&&(t.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),t.NdJ("opened",function(){return s.setTab(s.SEARCH)}),t.TgZ(2,"mat-expansion-panel-header")(3,"mat-panel-title"),t._uU(4," Hamsters search "),t.qZA()(),t.YNc(5,ct,1,0,"ng-template",1),t.qZA(),t.TgZ(6,"mat-expansion-panel",0),t.NdJ("opened",function(){return s.setTab(s.POSTS)}),t.TgZ(7,"mat-expansion-panel-header")(8,"mat-panel-title"),t._uU(9," Feed hamster with love "),t.qZA()(),t.YNc(10,pt,1,0,"ng-template",1),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("expanded",s.expanded[s.SEARCH]),t.xp6(5),t.Q6J("expanded",s.expanded[s.POSTS]))},dependencies:[h.pp,h.ib,h.yz,h.yK,h.HS,nt,lt],styles:["[_nghost-%COMP%]{padding:20px}"]}),e})(),mt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,l.qX,l.o0,p.m0]}),e})(),ht=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,l.qX,l.z7]}),e})();const dt=[{path:"",component:M}];let ut=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,l.qX,f.JF,mt,ht,g.Bz.forChild(dt)]}),e})()}}]);