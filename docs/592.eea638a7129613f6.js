"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[592],{96592:(dt,v,o)=>{o.r(v),o.d(v,{SearchResultsPostsInteractionsComponent:()=>Z,SearchResultsPostsInteractionsModule:()=>ht});var I=o(58485),g=o(83070),L=o(24987),u=o(23355),O=o(10925),t=o(60105),d=o(97477),p=o(42341),A=o(84782),N=o(90801),m=o(12777),$=o(5211),P=o(43838),M=o(64839),B=o(98832),R=o(61037),U=o(76808),J=o(12866),Q=o(97475),l=o(35054),y=o(4393),f=o(54227);let x=(()=>{class e{constructor(n){this.http=n,this.getHamsterByName=s=>s?l.I6.ctrl.getHamsterByName(s).received.observable.pipe((0,m.U)(r=>r.body.rawJson)):(0,y.of)([])}getHamsterByName(n){return n?this.http.get(`/api/hamsterByName/${n}`):(0,y.of)([])}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var C=o(52988),W=o(60465),Y=o(94235),i=o(41380),E=o(30355);const z=["side"],X=["search"];function b(e,a){if(1&e&&(t.ynx(0),t._UZ(1,"app-hamster",11),t.BQk()),2&e){const n=a.$implicit;t.xp6(1),t.Q6J("hamster",n)}}function G(e,a){if(1&e&&(t.ynx(0),t.YNc(1,b,2,1,"ng-container",10),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",n)}}function D(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,G,2,1,"ng-container",4),t.qZA()),2&e){const n=a.$implicit;t.oxw();const s=t.MAs(9);t.xp6(1),t.Q6J("ngIf",n.length>0)("ngIfElse",s)}}function w(e,a){1&e&&t._uU(0," zero hamsters to show ")}function j(e,a){1&e&&(t.TgZ(0,"span"),t._uU(1," loading data from server"),t.qZA())}function K(e,a){if(1&e&&t._UZ(0,"span",15),2&e){t.oxw(2);const n=t.MAs(3);t.Q6J("ngTemplateOutlet",n)}}function V(e,a){if(1&e&&(t.ynx(0),t.YNc(1,j,2,0,"span",13),t.YNc(2,K,1,1,"span",14),t.BQk()),2&e){const n=a.$implicit;t.xp6(1),t.Q6J("ngIf",n.length>0),t.xp6(1),t.Q6J("ngIf",0===n.length)}}function k(e,a){1&e&&t._uU(0," please type hamster name in the input above ")}function q(e,a){if(1&e&&(t.YNc(0,V,3,2,"ng-container",4),t.ALo(1,"async"),t.YNc(2,k,1,0,"ng-template",null,12,t.W1O)),2&e){const n=t.MAs(3),s=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,s.typedWords$))("ngIfElse",n)}}function _(e,a){if(1&e&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",n," ")}}let tt=(()=>{class e{constructor(n){this.api=n,this.searchInputChange$=(0,A.P)(()=>{var s;return(0,N.R)(null===(s=this.search)||void 0===s?void 0:s.nativeElement,"keyup")}).pipe((0,m.U)(s=>s.target.value),(0,$.b)(500),(0,P.x)(),(0,M.B)()),this.isLoadingData=!1}ngOnInit(){this.typedWords$=this.searchInputChange$.pipe((0,B.h)(n=>!!n),(0,R.R)((n,s)=>n.concat(s).slice(-20),[]),(0,u.b)(()=>this.scrollBottom(this.side))),this.searchResults$=this.searchInputChange$.pipe((0,u.b)(()=>this.isLoadingData=!0),(0,U.w)(n=>this.api.getHamsterByName(n).pipe((0,J.K)(s=>(this.isLoadingData=!1,Q.E)))),(0,u.b)(()=>this.isLoadingData=!1))}scrollBottom(n){n&&setTimeout(()=>{n.nativeElement.scrollTop=n.nativeElement.scrollHeight})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(x))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-hamster-search"]],viewQuery:function(n,s){if(1&n&&(t.Gf(z,5,t.SBq),t.Gf(X,7)),2&n){let r;t.iGM(r=t.CRH())&&(s.side=r.first),t.iGM(r=t.CRH())&&(s.search=r.first)}},features:[t._Bn([x])],decls:19,vars:7,consts:[["appearance","fill",1,"example-full-width"],["matInput",""],["search",""],[1,"main"],[4,"ngIf","ngIfElse"],["zeroHamsterTemplate",""],["loadingDataTemplate",""],[1,"side"],[1,"title"],["side",""],[4,"ngFor","ngForOf"],[3,"hamster"],["elseTemplate",""],[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(n,s){if(1&n&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2,"Type name of your little, chubby friend"),t.qZA(),t._UZ(3,"input",1,2),t.qZA(),t.TgZ(5,"mat-card",3),t.YNc(6,D,2,2,"div",4),t.ALo(7,"async"),t.YNc(8,w,1,0,"ng-template",null,5,t.W1O),t.qZA(),t.YNc(10,q,4,4,"ng-template",null,6,t.W1O),t.TgZ(12,"mat-card",7)(13,"h4",8),t._uU(14,"Already typed words:"),t.qZA(),t.TgZ(15,"ul",null,9),t.YNc(17,_,2,1,"li",10),t.ALo(18,"async"),t.qZA()()),2&n){const r=t.MAs(11);t.xp6(6),t.Q6J("ngIf",t.lcZ(7,3,s.searchResults$))("ngIfElse",r),t.xp6(11),t.Q6J("ngForOf",t.lcZ(18,5,s.typedWords$))}},directives:[C.KE,C.hX,W.Nt,Y.a8,i.O5,i.sg,E.L,i.tP],pipes:[i.Ov],styles:["mat-form-field[_ngcontent-%COMP%]{width:80%;max-width:400px}mat-card[_ngcontent-%COMP%]{display:inline-block;vertical-align:text-top}.main[_ngcontent-%COMP%]{width:calc(60% - 20px);margin:10px}.side[_ngcontent-%COMP%]{width:calc(40% - 20px);margin:10px}.side[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%;min-height:100px;max-height:200px;overflow-y:auto;overflow-x:hidden}"]}),e})();var S=o(34707),et=o(67635),H=o(68991);function T(e,a){return a?n=>n.pipe(T((s,r)=>(0,S.Xf)(e(s,r)).pipe((0,m.U)((c,h)=>a(s,c,r,h))))):(0,et.e)((n,s)=>{let r=0,c=null,h=!1;n.subscribe((0,H.x)(s,ut=>{c||(c=(0,H.x)(s,void 0,()=>{c=null,h&&s.complete()}),(0,S.Xf)(e(ut,r++)).subscribe(c))},()=>{h=!0,!c&&s.complete()}))})}var nt=o(97500),st=o(49189);let F=(()=>{class e{constructor(n,s){this.http=n,this.snackBar=s,this.getHamsterOwners=()=>l.I6.ctrl.getHamsters().received.observable.pipe((0,m.U)(r=>r.body.rawJson))}getHamsterOwners(){return this.http.get("/api/hamsters")}applyLoveTo(n){return new nt.y(s=>{n.isLoading=!0,setTimeout(()=>{isNaN(n.loveLevel)&&(n.loveLevel=0),n.loveLevel<=100&&(n.loveLevel=Number(n.loveLevel)+5),n.isLoading=!1,s.complete(),this.snackBar.open("DONE",void 0,{duration:1e3})},3e3)})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(f.eN),t.LFG(st.ux))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var at=o(18307);function ot(e,a){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-hamster-post",1),t.NdJ("loveButton",function(){const c=t.CHM(n).$implicit;return t.oxw().loveClicking$.next(c)}),t.qZA(),t.BQk()}if(2&e){const n=a.$implicit;t.xp6(1),t.Q6J("hamster",n)}}let rt=(()=>{class e{constructor(n){this.api=n,this.loveClicking$=new g.x,this.saveLoveClick$=this.loveClicking$.pipe(T(s=>this.api.applyLoveTo(s))).subscribe(),this.hamsters$=this.api.getHamsterOwners().pipe((0,m.U)(s=>s.map(r=>r)))}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(F))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-feed-hamster-with-love"]],features:[t._Bn([F])],decls:4,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"hamster","loveButton"]],template:function(n,s){1&n&&(t.YNc(0,ot,2,1,"ng-container",0),t.ALo(1,"async"),t._UZ(2,"br")(3,"br")),2&n&&t.Q6J("ngForOf",t.lcZ(1,1,s.hamsters$))},directives:[i.sg,at.F],pipes:[i.Ov],styles:[""]}),e})();function it(e,a){1&e&&t._UZ(0,"app-hamster-search")}function ct(e,a){1&e&&t._UZ(0,"app-feed-hamster-with-love")}let Z=(()=>{class e{constructor(n,s){this.route=n,this.router=s,this.destroy$=new g.x,this.expanded={},this.SEARCH="hamsters-search",this.POSTS="hamster-posts",this.currentUrl$=this.route.url}ngOnInit(){this.route.queryParams.pipe((0,L.R)(this.destroy$),(0,u.b)(n=>{0===Object.keys(n).length?this.setTab(this.SEARCH):this.expanded[n.tab]=!0})).subscribe()}setTab(n){var s=this;return(0,I.Z)(function*(){const r=yield(0,O.z)(s.currentUrl$);s.router.navigate(r,{queryParams:{tab:n}})})()}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.gz),t.Y36(d.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-search-results-posts-interactions-tab"]],decls:11,vars:2,consts:[[3,"expanded","opened"],["matExpansionPanelContent",""]],template:function(n,s){1&n&&(t.TgZ(0,"mat-accordion")(1,"mat-expansion-panel",0),t.NdJ("opened",function(){return s.setTab(s.SEARCH)}),t.TgZ(2,"mat-expansion-panel-header")(3,"mat-panel-title"),t._uU(4," Hamsters search "),t.qZA()(),t.YNc(5,it,1,0,"ng-template",1),t.qZA(),t.TgZ(6,"mat-expansion-panel",0),t.NdJ("opened",function(){return s.setTab(s.POSTS)}),t.TgZ(7,"mat-expansion-panel-header")(8,"mat-panel-title"),t._uU(9," Feed hamster with love "),t.qZA()(),t.YNc(10,ct,1,0,"ng-template",1),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("expanded",s.expanded[s.SEARCH]),t.xp6(5),t.Q6J("expanded",s.expanded[s.POSTS]))},directives:[p.pp,p.ib,p.yz,p.yK,p.HS,tt,rt],styles:[""]}),e})(),lt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[i.ez,l.qX,l.o0]]}),e})(),pt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[i.ez,l.qX,l.z7]]}),e})();const mt=[{path:"",component:Z}];let ht=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[i.ez,l.qX,f.JF,lt,pt,d.Bz.forChild(mt)]]}),e})()}}]);